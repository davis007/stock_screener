# やりたいこと

- Y!ファイナンス 買いたい指標の取得 買いたい85％など
- 流動性チェックは 個別と総合に入れたい
```python
df = yf.download("2962.T", interval="5m", period="5d")
zero_rate = (df["Volume"] == 0).mean()
avg_vol = df["Volume"].mean()
```

- 買いたい比率と実際の日足チャートと比べたい


marketwave.pyを制作して以下のクラスを作成
どちらの指数も１０日分の５分足を取得するところから initでデータを取得
def uneri
def wave
として作成しJSONで返却

## うねり指数
1. 銘柄コード　Yf 10日間 5分足を取得する
2. 1日単位で5分足を走査 始まり値が基準値
3. 始値を基準に何度 始値を往復したか？でカウントを取る
   - 例 始値 500 → 510 → 515 → 510 → 495 → 480 → 475 → 460 → 490 → 505（これで2回）
   - 上記は510→495に戻った際に1回をカウント さらに490→505になった際に1回をカウント
   - 始値から上がn% 下がn%で第２第３の数値を取る
   - 例 1日分のデータ例 [3,6%,13.8%]
4. これを10日間走査して1日のAVGを出力する
5. 過去10日間のデータのAVGを出力する

## 流動性指数
	1.	銘柄コードを指定して、YFinanceで5分足を10日分取得する
	2.	1日ごとに5分足を走査して、出来高の平均を出す
      - 出来高が多いほど「動きやすい」＝スコア高
	3.	5分足の中で出来高0の本数を数える
      - 出来高0が多いほど「過疎」＝スコア低
	4.	1日の流動性スコアを次の式で取る
      - 流動性 = (平均出来高 ÷ 最大出来高) × (1 − 出来高ゼロ率)
	5.	10日分の平均を出して「流動性指数」を算出
      → 値が1に近いほど流動性が高い

完了したら
4755　楽天グループでテストしてエラーが出ないかチェック
marketwave.pyファイルはtouchで新規作成してください

## ストン法
新・統計ロジック（連続足基準）
「朝イチの連続」を探す
9:00からスキャンを開始します。
例：9:00（陽線）→ 9:05（陽線）→ 9:10（陽線）→ 9:15（陰線）
「連続」の終点を特定する
この場合、「アゲの連続」は9:10（3本目）で終わりました。
この「9:10の終値」が、逆張りを検討する天井（＝「ストン」の起点）となります。
統計を取る
統計A（連続の長さ）: この銘柄は、朝イチに平均何本連続でアゲ（サゲ）るクセがあるか？
（例: A銘柄は平均1.2本、B銘柄は平均2.8本... など）
統計B（「往って来い」の確率）:
「アゲの連続」が終わった後（9:15以降）、その「アゲ」の始点（＝9:00の始値）を割り込む（＝「往って来い」達成）確率は何%か？
ストンまでの本数の平均も欲しい

それ、非常に重要な指標ですね！
その平均値がわかれば、その銘柄の「クセ」がより鮮明になります。

* 平均が「1.2本」の銘柄 → ほぼ「1本目ストン」で逆張りが機能するタイプ。
* 平均が「2.8本」の銘柄 → 1本目で逆張りすると危険。「3本目」まで待つべきタイプ。

この「ストンまでの平均本数」を算出するための統計ロジックは、以下のようになります。

---

## 「ストンまでの平均本数」算出ロジック

**集計対象:** 過去 $X$ 日間（例: 1年＝約240日）のデータ

### 1. データの分類と集計

過去 $X$ 日間、1日ずつ9:00からスキャンします。

* **パターンA: 「アゲ」スタートの日**
    * 9:00（1本目）が陽線だった日を対象にします。
    * 9:05（2本目）、9:10（3本目）...と見ていき、最初に「陰線」または「十字線（小動き）」が出るまで「陽線が続いた本数」を記録します。
        * 例1: 陽線 → **陰線**... → 記録「1本」
        * 例2: 陽線 → 陽線 → 陽線 → **陰線**... → 記録「3本」
    * 記録した全日数の「平均値」を算出します。
    * → これが**『アゲの後のストンまでの平均本数』**です。

* **パターンB: 「サゲ」スタートの日**
    * 9:00（1本目）が陰線だった日を対象にします。
    * 同様に、最初に「陽線」または「十字線」が出るまで「陰線が続いた本数」を記録します。
        * 例1: 陰線 → **陽線**... → 記録「1本」
        * 例2: 陰線 → 陰線 → **陽線**... → 記録「2本」
    * 記録した全日数の「平均値」を算出します。
    * → これが**『サゲの後のストンまでの平均本数』**です。

### 2. （オプション）総合平均

* 上記AとBで記録した全てのデータ（アゲの連続本数、サゲの連続本数）を全部まとめて平均します。
* → これが**『（方向問わず）ストンまでの平均本数』**です。